"use strict";(self.webpackChunkstablecraft_io=self.webpackChunkstablecraft_io||[]).push([[8890],{612:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>i,default:()=>u,frontMatter:()=>r,metadata:()=>t,toc:()=>l});const t=JSON.parse('{"id":"code-examples/sample-api-requests","title":"Sample API Requests","description":"If your app or platform processes stablecoin transactions, you\u2019ll likely want a backend layer to help manage interactions with wallets and blockchain networks. Whether you\u2019re sending payouts, confirming incoming payments, or logging transactions, these sample API patterns will give you a solid starting point.","source":"@site/docs/code-examples/sample-api-requests.mdx","sourceDirName":"code-examples","slug":"/code-examples/sample-api-requests","permalink":"/kb/code-examples/sample-api-requests","draft":false,"unlisted":false,"editUrl":"https://github.com/johnpottergr/stablecraft.io/edit/main/docs/code-examples/sample-api-requests.mdx","tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"id":"sample-api-requests","title":"Sample API Requests","sidebar_position":4},"sidebar":"kbSidebar","previous":{"title":"Metamask Integration","permalink":"/kb/code-examples/metamask-integration"}}');var a=s(4848),o=s(8453);const r={id:"sample-api-requests",title:"Sample API Requests",sidebar_position:4},i=void 0,c={},l=[{value:"1. Check stablecoin balance (ERC-20)",id:"1-check-stablecoin-balance-erc-20",level:3},{value:"2. Send a stablecoin transfer",id:"2-send-a-stablecoin-transfer",level:3},{value:"3. Monitor for incoming payments",id:"3-monitor-for-incoming-payments",level:3},{value:"Suggested use cases",id:"suggested-use-cases",level:3},{value:"Next steps",id:"next-steps",level:3}];function d(e){const n={code:"code",em:"em",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.p,{children:"If your app or platform processes stablecoin transactions, you\u2019ll likely want a backend layer to help manage interactions with wallets and blockchain networks. Whether you\u2019re sending payouts, confirming incoming payments, or logging transactions, these sample API patterns will give you a solid starting point.\nThe examples below are written in JavaScript (Node.js/Express) but can be adapted to any stack. They assume you're using a provider like Infura, Alchemy, or a private RPC to connect to an EVM-compatible chain such as Ethereum, Polygon, or Arbitrum."}),"\n",(0,a.jsx)(n.h3,{id:"1-check-stablecoin-balance-erc-20",children:"1. Check stablecoin balance (ERC-20)"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{children:"js\n// GET /balance?address=0x123...&token=0xA0b8...\nimport Web3 from 'web3';\nimport erc20ABI from './erc20ABI.json'; // standard ERC-20 ABI\n\nconst web3 = new Web3(process.env.RPC_URL);\n\nexport async function getBalance(req, res) {\n  const { address, token } = req.query;\n\n  try {\n    const contract = new web3.eth.Contract(erc20ABI, token);\n    const rawBalance = await contract.methods.balanceOf(address).call();\n    const balance = Number(rawBalance) / 10 ** 6; // For USDC: 6 decimals\n\n    res.json({ address, token, balance });\n  } catch (err) {\n    res.status(500).json({ error: 'Could not fetch balance', details: err.message });\n  }\n}\n"})}),"\n",(0,a.jsx)(n.h3,{id:"2-send-a-stablecoin-transfer",children:"2. Send a stablecoin transfer"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{children:"js\n// POST /send\n// body: { from, to, amount, token }\n\nexport async function sendStablecoin(req, res) {\n  const { from, to, amount, token } = req.body;\n  const contract = new web3.eth.Contract(erc20ABI, token);\n\n  try {\n    const amountRaw = web3.utils.toBN(amount * 10 ** 6); // USDC format\n    const gas = await contract.methods.transfer(to, amountRaw).estimateGas({ from });\n\n    const tx = await contract.methods\n      .transfer(to, amountRaw)\n      .send({ from, gas });\n\n    res.json({ status: 'success', txHash: tx.transactionHash });\n  } catch (err) {\n    res.status(500).json({ error: 'Transfer failed', details: err.message });\n  }\n}\n"})}),"\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.em,{children:"Note:"})," This requires the private key to be loaded into a signer like Web3\u2019s web3.eth.accounts.wallet, or handled through a secure service like Fireblocks or a custodian. Never expose private keys in plaintext."]}),"\n",(0,a.jsx)(n.h3,{id:"3-monitor-for-incoming-payments",children:"3. Monitor for incoming payments"}),"\n",(0,a.jsx)(n.p,{children:"To track incoming stablecoin transfers, you can use an event listener or webhook-style polling system."}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{children:"js\nconst subscription = contract.events.Transfer({\n  filter: { to: monitoredAddress },\n}).on('data', (event) => {\n  const { from, to, value } = event.returnValues;\n  const amount = Number(value) / 10 ** 6;\n\n  console.log(`Received ${amount} tokens from ${from}`);\n});\n"})}),"\n",(0,a.jsx)(n.p,{children:"For production systems, you can use services like:"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Alchemy Notify"})," for webhook alerts"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"The Graph"})," to query blockchain events"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Backend cron jobs"})," that poll and log Transfer events at intervals"]}),"\n"]}),"\n",(0,a.jsx)(n.h3,{id:"suggested-use-cases",children:"Suggested use cases"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"Log wallet activity for user dashboards"}),"\n",(0,a.jsx)(n.li,{children:"Trigger actions after a payment is confirmed"}),"\n",(0,a.jsx)(n.li,{children:"Build internal tools to manage treasury or vendor payouts"}),"\n",(0,a.jsx)(n.li,{children:"Run batch payouts or scheduled transfers via API"}),"\n"]}),"\n",(0,a.jsx)(n.h3,{id:"next-steps",children:"Next steps"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"Web3.js Send USDC \u2013 Direct example of frontend token transfers"}),"\n",(0,a.jsx)(n.li,{children:"Handling Business Funds \u2013 Organize wallet flows and team access"}),"\n",(0,a.jsx)(n.li,{children:"Stablecoin Accounting \u2013 How to log, track, and value on-chain payments"}),"\n"]})]})}function u(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(d,{...e})}):d(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>r,x:()=>i});var t=s(6540);const a={},o=t.createContext(a);function r(e){const n=t.useContext(o);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:r(e.components),t.createElement(o.Provider,{value:n},e.children)}}}]);